20337263 俞泽斌 第六章作业

##### P1、

信息内容包括检验比特所构成的二维矩阵如下
$$
\left[
\begin{matrix}
1\ 1\ 1\ 0\ 1\\
0\ 1\ 1\ 0\ 0\\
1\ 0\ 0\ 1\ 0\\
1\ 1\ 0\ 1\ 1\\
1\ 1\ 0\ 0\ 0\\
\end{matrix}
\right]
$$


##### P2、

就使用P1所显示的二维偶校验矩阵
$$
\left[
\begin{matrix}
1\ 1\ 1\ 0\ 1\\
0\ 1\ 1\ 0\ 0\\
1\ 0\ 0\ 1\ 0\\
1\ 1\ 0\ 1\ 1\\
1\ 1\ 0\ 0\ 0\\
\end{matrix}
\right]
$$
对于单比特错误，比如
$$
\left[
\begin{matrix}
1\ 1\ 0\ 0\ 1\\
0\ 1\ 1\ 0\ 0\\
1\ 0\ 0\ 1\ 0\\
1\ 1\ 0\ 1\ 1\\
1\ 1\ 0\ 0\ 0\\
\end{matrix}
\right]
$$
可以检测出来第一行与第三列的偶校验出错，所以可以检测出具体位置来进行修改

对于双比特错误
$$
\left[
\begin{matrix}
1\ 1\ 0\ 1\ 1\\
0\ 1\ 1\ 0\ 0\\
1\ 0\ 0\ 1\ 0\\
1\ 1\ 0\ 1\ 1\\
1\ 1\ 0\ 0\ 0\\
\end{matrix}
\right]
$$
可以看到此时我修改了第一行第三列和第四列的数据，设置为出错的地方，然后此时通过奇偶校验位只能发现第三列和第四列的校验出现问题，而第一行的校验位没有问题，说明可以检测出问题，但无法定位是哪一行，即能被检测但不能被纠正。

##### P3、

使用溢出加到最末尾的加法，得到

01001100 01101001 + 01101110 01101011 +00100000 01001100 +01100001 01111001 +0110010101110010 =10100010 00001100 

补码为 01011101 11110011

##### P5、

<img src="1.jpg" style="zoom:20%;" />

##### P7、

a、单比特的差错得到的数据K为
$$
K=D*2^rXOR\ R +2i
$$
所以当此时的K除以G的情况下，会提醒不是零，此时的G为1001，始终包含2个1，从而报错，可以检测出来单个比特的错误

b、不能，奇数比特的序列不能够除以11，而G可以除以11，所以错误的序列无法被G除以

##### P13、

轮询的时间为
$$
N(Q/R+d_{poll})
$$
所以吞吐量=一次轮询总比特数/时间=
$$
\frac{NQ}{N(Q/R+d_{poll})}=\frac{R}{1+d_{poll}R/Q}
$$

##### P14、

a、IP地址

A:192.168.1.001       B:192.168.1.002  路由器端口为192.168.1.003

C:192.168.2.001		D:192.168.2.002 接近子网1路由器端口192.168.2.003  接近子网2路由器端口192.168.2.004

E：192.168.3.001     F：192.168.3.002 路由器端口192.168.3.003

b、MAC地址

A:00-00-00-00-00-00       B:11-11-11-11-11-11  路由器端口为22-22-22-22-22-22

C:44-44-44-44-44-44	   D:66-66-66-66-66-66 接近子网1路由器端口33-33-33-33-33-33  接近子网2路由器端口55-55-55-55-55-55

E：77-77-77-77-77-77     F：99-99-99-99-99-99 路由器端口88-88-88-88-88-88

c、首先主机E的转发表确定数据包一个发送到端口192.168.3.003

然后E中适配器得到对应的mac地址及88-88-88-88-88-88，创建以此为目的地址的以太网数据包

路由器2接受数据包，由转发表得到应该传到路由器1的192.168.2.003端口

路由器2向192.168.2.004的端口发送目的地址为33-33-33-33-33-33和55-55-55-55-55-55的以太网分组

路由器1接受数据包，由转发表得到应该传到192.168.1.002

路由器1向192.168.1.002的端口发送目的地址为11-11-11-11-11-11的以太网数据包

B接受数据包

d、需要确定各个位置的mac地址，即首先E在广播以太网帧内发送ARP查询包，路由器2接受查询包并发送ARP响应包，得到具体的mac地址后重复c中操作

##### P15、

a、不会请求，因为E可以检查F的ip地址的前缀，发现在同一个子网下，不需要发送给默认路由器R1

源IP：E的ip地址    目的IP：F的ip地址

源MAC：E的MAC地址    目的MAC：F的MAC地址

b、不会，因为E可以检查B的ip地址的前缀，发现他们不在同一个局域网上

源IP：E的ip地址    目的IP：B的ip地址

源MAC：E的MAC地址    目的MAC：连接到E所在子网的R1接口的MAC地址

c、S1收到请求报文后会通过两个接口来广播以太网帧，并且S1会发现A在R1的子网上，更新转发表来包含主机A的条目

R1也会收到ARP请求，但不会向子网3区转发这个报文

B不会发送ARP查询信息来请求A的MAC地址，因为A的ARP请求信息中包含了该信息

交换机S1收到B的响应消息，在转发表中为B添加一个条目，删除接收到的帧，因为A和B在同一个LAN段上

##### P16

a、不会请求，因为E可以检查F的ip地址的前缀，发现在同一个LAN段上，不需要发送给交换机S2

源IP：E的ip地址    目的IP：F的ip地址

源MAC：E的MAC地址    目的MAC：F的MAC地址

b、会，因为E要找到B的MAC地址，需要发送一个ARP查询包，并且会由交换机S2重新广播，使得B接收

源IP：E的ip地址    目的IP：B的ip地址

源MAC：E的MAC地址    目的MAC：广播地址：FF-FF-FF-FF-FF-FF

c、S1收到请求报文后会通过两个接口来广播以太网帧，并且S1会发现A在R1的子网上，更新转发表来包含主机A的条目

S2也会接收到ARP请求消息，并且将这个查询消息广播到所有接口

B不会发送ARP查询信息来请求A的MAC地址，因为A的ARP请求信息中包含了该信息

交换机S1收到B的响应消息，在转发表中为B添加一个条目，删除接收到的帧，因为A和B在同一个LAN段上

##### P17

$$
10Mbps：51200bits/10^7bps=5.12ms
$$

$$
100Mbps：51200bits/10^8bps=512us
$$

##### P18

 如果当t=0的时候A开始传输，那么在576时A会完成传输，最坏的情况是在t=324的时候，B开始传输，此时A的第一个帧还没到达B，所以B可以传输，然后当t=324+325=649>576的时候，B的第一个比特到达A，A在检测到b的开始发送之前完成传输，但此时发生了碰撞，而A错误地认为他的帧在没有碰撞的情况下被成功传输了。

##### P19

t=0 A和B开始传输

t=245 A和B检测到碰撞

t=293，A和B结束传输

t=293+245=538 B最后一比特到达A，A开始检测空闲线路

t=538+96=634, A开始传输

t=293+512=805 B返回到第二步

t=805+96=901 B开始传输

t=634+245=879 A的传输到达B

可以发现当B在t=901开始传输的时候，A的重传已经结束了，所以不会出现碰撞，B也不会抑制传输。

##### P21

IP地址

A:192.168.1.001       B:192.168.1.002  路由器端口为192.168.1.003

C:192.168.2.001		D:192.168.2.002 接近子网1路由器端口192.168.2.003  接近子网2路由器端口192.168.2.004

E：192.168.3.001     F：192.168.3.002 路由器端口192.168.3.003

MAC地址

A:00-00-00-00-00-00       B:11-11-11-11-11-11  路由器端口为22-22-22-22-22-22

C:44-44-44-44-44-44	   D:66-66-66-66-66-66 接近子网1路由器端口33-33-33-33-33-33  接近子网2路由器端口55-55-55-55-55-55

E：77-77-77-77-77-77     F：99-99-99-99-99-99 路由器端口88-88-88-88-88-88

 i)从A到左边路由器

源IP：192.168.1.001     目的IP：192.168.3.002

源MAC：00-00-00-00-00-00    目的MAC：22-22-22-22-22-22

ii)左路由到右路由

源IP：192.168.1.001     目的IP：192.168.3.002

源MAC：33-33-33-33-33-33    目的MAC：55-55-55-55-55-55

ii)右路由到F

源IP：192.168.1.001     目的IP：192.168.3.002

源MAC：88-88-88-88-88-88    目的MAC：99-99-99-99-99-99

##### P22、

i）从A到交换机

源IP：192.168.1.001     目的IP：192.168.3.002

源MAC：00-00-00-00-00-00    目的MAC：55-55-55-55-55-55

ii)交换机到右路由

源IP：192.168.1.001     目的IP：192.168.3.002

源MAC：00-00-00-00-00-00    目的MAC：55-55-55-55-55-55

ii)右路由到F

源IP：192.168.1.001     目的IP：192.168.3.002

源MAC：88-88-88-88-88-88    目的MAC：99-99-99-99-99-99

##### P26

| 行为         | 交换机表状态                     | 链路包前往 | 评价                               |
| ------------ | -------------------------------- | ---------- | ---------------------------------- |
| B向E发送一帧 | 与B的MAC地址对应的交换机学习接口 | ABCDEF     | 不知道对应接口，所以全部传输，广播 |
| E向B回答一帧 | 与E的MAC地址对应的交换机学习接口 | B          | 交换机知道与B的MAC地址对应的接口   |
| A向B发送一帧 | 与A的MAC地址对应的交换机学习接口 | B          | 交换机知道与B的MAC地址对应的接口   |
| B向A回答一帧 | 无改变                           | A          | 交换机知道与A的MAC地址对应的接口   |

##### P28

分配ip地址

EE部门，从左到右 192.168.1.1，192.168.1.2，192.168.1.3，子网掩码192.168.1/24

CS部门，从左到右192.168.2.1，192.168.2.2，192.168.2.3，子网掩码192.168.2/24

路由器接口分配两个ip地址，192.168.1.0与vlan10关联

和192.168.2.0 与vlan20关联

假设EE部门的192.168.1.1所对应的主机A向CS部门192.168.2.1所对应的主机B发送ip数据包，主机A首先将目的ip地址为192.168.2.1的ip数据包封装到与具有连接到交换机端口的路由器接口的MAC地址为目标MAC地址的帧中，然后路由器接受该帧，传递到IP层，通过子接口192.168.2.0将数据包转发到子网192.168.2/24中，然后路由器将ip数据包封装成一个帧并发送到端口1，交换机接收到后发现VLANid并发送到位于CS部门的主机B

##### P29

直接写出各个路由器的表

R5

| 入标签 | 出标签 | 目的地 | 出接口 |
| ------ | ------ | ------ | ------ |
|        | 5      | A      | 0      |

R6

| 入标签 | 出标签 | 目的地 | 出接口 |
| ------ | ------ | ------ | ------ |
|        | 5      | A      | 0      |

R4

| 入标签 | 出标签 | 目的地 | 出接口 |
| ------ | ------ | ------ | ------ |
| 7      | 10     | A      | 0      |
|        | 12     | D      | 0      |
| 5      | 8      | A      | 1      |

##### P31

首先因为我们的计算机的ip地址也未被分配，所以首先是通过DHCP协议来获得ip地址的分配，即计算机先在DHCP服务器中创建一个目标地址为255.255.255.255的特殊ip数据包，并将其放在以太网帧中并广播，按照DHCP协议获得ip地址，并且得到第一跳路由器的ip地址列表，计算机所在子网的子网掩码和本地DNS服务器的地址。

获得了ip地址后我们需要知道MAC地址，但此时ARP缓存为空，计算机使用ARP协议来获取第一跳路由器和本地DNS服务器的MAC地址

我们开始使用web，输入域名，然后计算机需要知道所对应的ip地址，先查找本地DNS服务器，没有后使用DNS协议查找网站的ip地址

获取到ip地址之后，如果网页不在本地的web服务器内，那么通过第一跳路由器发送HTTP请求，封装在TCP数据包中，进一步封装在ip数据包、以太网帧中，将以太网帧发送到第一跳路由器，路由器接收帧后将他们传输到ip层，检查路由表，传输到正确的接口。一直持续到传输到正确的服务器

正确的服务器将http响应消息发送回计算机，同样也是封装在TCP数据包中，进一步封装在ip数据包、以太网帧中，然后最后通过第一跳路由器转发到本地计算机上被接收

##### P32

a、相同的数据率的话，就是80个流通过B接入路由器10Gbps链路，速率为10Gbps/80=125Mbps

b、互联的情况下因为第一台第二层交换机和第二台第二层交换机存在4条互不相交的路径，可以一起为前两台第二层交换机之间提供总和为40Gbps的聚合容量，然后对于整个网络，1-9,2-10,3-11,4-12,5-13,6-14，7-15,8-16，可以看到每个对应之间都有4条链路来提供，所以总的带宽是80Gbps，每个流速为1Gbps

c、1Gbps/20=0.5Gbps

##### P33

a、电子邮件和视频都是0.1%

b、
$$
0.001 *0.001 =10^{-6}
$$
c、前三个机架要么全放电子邮件的所有数据和软件，要么全放视频的所有数据和软件，第四机架放电子邮件和视频的所有数据和软件，只要两个应用不同时使用第四机架即可，同时使用第四机架的概率为b中的10^-6，满足要求0.001%

